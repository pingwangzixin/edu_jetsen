<div class="zy_full">
	<div class="zy_main">
		<div class="zy_report_box">
			<div class="zy_report_tit_box">
				<div class="zy_report_tit">
					<p>黑龙江省初中毕业生综合素质评价报告单</p>
					<span>（牡丹江教育小学）</span>
				</div>
				<button id="export">下载报告</button>
			</div>
			
			<div class="zy_report_con">
				<table class="zy_basic_info" border="" cellspacing="" cellpadding="">
					<tr>
						<td width="84px">姓名</td>
						<td width="170px" ng-bind="student.stuName" id="stuName"></td>
						<td width="94px">性别</td>
						<td width="110px" ng-bind="student.sex"></td>
						<td width="94px">民族</td>
						<td width="110px" ng-bind="student.nation"></td>
						<td width="94px">出生年月</td>
						<td width="200px" ng-bind="student.birthDate"></td>
						<td rowspan="3" class="zy_upload_photo">
							<img ng-src="{{student.picUrl}}" ng-show="imgState"/>
							<div class="zy_no_photo" ng-show="!imgState">
							<input type="file" name="file" id="" value="" onchange="angular.element(this).scope().picAction(this)" />
							<i class="iconfont icon-jia"></i>
							<span>上传照片</span>
							</div>
						</td>
					</tr>
					<tr>
						<td>籍贯</td>
						<td ng-bind=""></td>
						<td>家庭住址</td>
						<td colspan="3" ng-bind="student.address"></td>
						<td>联系电话</td>
						<td ng-bind="student.phoneNumber"></td>
					</tr>
					<tr>
						<td>学籍号</td>
						<td ng-bind="student.studyNo"></td>
						<td>班级</td>
						<td colspan="3" ng-bind="student.className"></td>
						<td >班主任</td>
						<td ng-bind="student.headmaster"></td>
					</tr>
				</table>
			
				<table class="zy_dimension" border="" cellspacing="" cellpadding="">
					<tr>
						<th width="200px">评价维度</th>
						<th ng-repeat="weiduName in weiduNameList" ng-bind="weiduName">思想品德和公民素养</th>
						<!--<th>学业水平和学习素养</th>
						<th>身体和心理健康水平</th>
						<th>兴趣特长及审美素养</th>
						<th>社会实践和动手能力</th>-->
					</tr>
					<tr ng-repeat="stuWeiDuInfo in stuWeiduInfoList">
						<td><span ng-bind="stuWeiDuInfo.gradeName+'('+stuWeiDuInfo.term+')'"></span>评价等级</td>
						<td ng-repeat="stuGrade in stuWeiDuInfo.data.weiduLevel track by $index" ng-bind="stuGrade">D</td>
					</tr>
				</table>
				
				<!--<div class="zy_academic">
					<table border="" cellspacing="" cellpadding="">
						<tr>
							<th>学业水平考试（年级）</th>
							<th>思想<br />品德</th>
							<th>语文</th>
							<th>数学</th>
							<th>外语</th>
							<th>历史</th>
							<th>地理</th>
							<th>生物</th>
							<th>物理</th>
							<th>化学</th>
							<th>体育</th>
							<th>音乐</th>
							<th>美术</th>
							<th>综合实<br />践活动</th>
							<th>地方<br />课程</th>
							<th>校本<br />课程	</th>
						</tr>
						<tr>
							<td>六年级（上学期）</td>
							<td></td>
							<td></td>
							<td></td>
							<td></td>
							<td></td>
							<td></td>
							<td></td>
							<td></td>
							<td></td>
							<td></td>
							<td></td>
							<td></td>
							<td></td>
							<td></td>
							<td></td>
						</tr>
					</table>
				</div>-->
				
				<div class="zy_evaluate_modular">
					<p>学生自评：</p>
					<div class="zy_evaluate_entry" ng-repeat="py in pingYuList">
						<p ng-bind="py.gradeName+'('+py.term+')'"></p>
						<textarea name="" rows="" cols="" readonly ng-bind="py.selComment"></textarea>
					</div>
				</div>
				<div class="zy_evaluate_modular">
					<p>家长评价：</p>
					<div class="zy_evaluate_entry" ng-repeat="py in pingYuList">
						<p ng-bind="py.gradeName+'('+py.term+')'"></p>
						<textarea name="" rows="" cols="" readonly ng-bind="py.homeComment"></textarea>
					</div>
				</div>
				
				<div class="zy_evaluate_modular">
					<p>综合评语：</p>
					<div class="zy_evaluate_entry" ng-repeat="py in pingYuList">
						<p ng-bind="py.gradeName+'('+py.term+')'"></p>
						<textarea name="" rows="" cols="" readonly ng-bind="py.teaComment"></textarea>
					</div>
				</div>
				
				<div class="zy_evaluate_modular zy_evaluate_group">
					<p>综合评价结果：</p>
					<div class="zy_evaluate_entry">
						<textarea name="" rows="" cols="" readonly></textarea>
						<p>教师评价小组：</p>
					</div>
				</div>
				<div class="zy_evaluate_modular zy_result_modular">
					<p>学校评价工作委员会的认定结果：</p>
					<div class="zy_evaluate_entry">
						<textarea name="" rows="" cols="" readonly></textarea>
						<div class="zy_cachet">
							<p>校长公章：</p>
							<p>学校公章：</p>
						</div>
					</div>
				</div>
				
			</div>
			
		</div>
		
	</div>
</div>
<script src="common/js/jspdf.debug.js" type="text/javascript" ></script>
<script src="common/js/html2canvas.js" type="text/javascript" ></script>
<script type="text/javascript">
		$("#export").click(
			function(){
				$(".dafencon .dfbanji").hide();
		  		$("#export").hide();
		  		$(".dafenrt").css("margin-left","7%")
				html2canvas(document.body, {
		          onrendered:function(canvas) {
		              //返回图片dataURL，参数：图片格式和清晰度(0-1)
		              var pageData = canvas.toDataURL('image/jpg/png', 1.0);
		              //方向默认竖直，尺寸ponits，格式a4[595.28,841.89]
		              var pdf = new jsPDF('', 'pt', 'a4');
		              //addImage后两个参数控制添加图片的尺寸，此处将页面高度按照a4纸宽高比列进行压缩
		              pdf.addImage(pageData, 'JPEG', 0, 0, 595.28, 592.28/canvas.width * canvas.height );
		               var stuName = $("#stuName").text()
		              pdf.save(stuName+'.pdf');
		              $(".dafencon .dfbanji").show();
		          		$("#export").show();
		      			$(".dafenrt").removeAttr('style');

		          }
		          })

			})
		
		
</script>